name: concurrency

on:
  workflow_dispatch:
  workflow_run:
    workflows: 
      - main
    types: 
      - completed

concurrency:
  group: ${{ github.workflow }}

jobs:
  test-job:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    runs-on: ubuntu-latest
    steps:
      - name: test job
        run: |
          echo "hello world"

  sequential-job:
    needs:
      - test-job
    runs-on: ubuntu-latest
    steps:
      - name: test job 2
        run: |
          echo "hello world again"
